{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sycho\\\\Desktop\\\\billage\\\\Front-End\\\\src\\\\components\\\\Write.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable jsx-a11y/alt-text */\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from \"styled-components\";\nimport axios from 'axios';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { ko } from 'date-fns/esm/locale';\nimport moment from 'moment';\nimport 'moment/locale/ko';\nimport del_img from '../components/images/del.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PageStyled = styled.body`\ndisplay:flex;\nflex-direction:column;\n// align-items:center;\n`;\n_c = PageStyled;\nconst InputStyled = styled.input`\n        margin: 0px 20px;\n        border: none;\n        outline: none;\n        display: flex;\n        height: 50px;\n        width: 90%;\n  `;\n_c2 = InputStyled;\nconst TextStyled = styled.textarea`\n        margin: 0px 20px;\n        border: none;\n        outline: none;\n        display: flex;\n        height: 300px;\n        width: 90%;\n  `;\n_c3 = TextStyled;\nconst TopStyled = styled.ul` \n    height:25px;\n    display:flex;\n    align-items:center;\n    justify-content:space-between;\n    list-style:none;\n    margin-top:5;\n    padding:0 20px 0 20px;\n    color: black;\n    font-size:15px;\n    font-weight:bold;\n  `;\n_c4 = TopStyled;\nconst BoardStyled = styled.ul`\n    display:flex;\n    align-items:center;\n    justify-content:space-evenly;\n    list-style:none;\n    margin:0;\n    padding:0 20px 0 20px;\n`; //시작일, 종료일 달력 스타일\n\n_c5 = BoardStyled;\nconst DatePickerStyled = styled(DatePicker)`\n    text-align: center;\n    width: 150px;\n    height: 30px;\n    font-size: 15px;\n    border-radius: 20px;\n    border: 1px solid gray;\n`;\n_c6 = DatePickerStyled;\nconst DateTitle = styled.div`\n    color: gray;\n    white-space: nowrap;\n    font-size: 13px;\n    margin-bottom: 5px;\n    margin-left : 43px;\n`;\n_c7 = DateTitle;\nconst DivStyled = styled.div`\n    display: flex;\n    justify-content:space-evenly;\n`;\n_c8 = DivStyled;\nconst MainContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 20px;\n  margin-left: 15px;\n  @media (max-width: 400px) {\n    width: 100%;\n    max-width: 400px;\n    justify-content: start;\n    flex-wrap: wrap;\n  }\n`; //이미지-가로 스크롤\n\n_c9 = MainContainer;\nconst Scroll = styled.div`\n  display: flex;\n  overflow-x:scroll;\n  white-space:nowrap;\n  ::-webkit-scrollbar { display: none; }\n`;\n_c10 = Scroll;\nconst InitialBox = styled.div`\n    width: 60px;\n    height: 60px;\n    border-radius:5px;\n    margin-right:10px;\n    border : solid 1px gray;\n    display : flex;\n    align-items: center;\n    flex-direction: column;\n`;\n_c11 = InitialBox;\nconst ImgAreaContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n_c12 = ImgAreaContainer;\nconst ImgArea = styled.div`\n  width: 60px;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n  object-fit: cover;\n`;\n_c13 = ImgArea;\nconst Img = styled.img`\n  object-fit: cover;\n  width: 100%;\n`;\nconst FileInput = styled.input`\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: none;\n`; //이미지 삭제 버튼\n\n_c14 = FileInput;\nconst DeleteButton = styled.button`\n  background: none;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  margin-left: -17px;\n  margin-top: -46px;\n`;\n_c15 = DeleteButton;\n\nfunction Write(props) {\n  _s();\n\n  const [title, setTitle] = useState(\"\"); //제목\n\n  const [price, setPrice] = useState(\"\"); //가격\n\n  const [startDate, setStartDate] = useState(new Date()); //대여 시작 날짜\n\n  const [endDate, setEndDate] = useState(new Date()); //대여 끝 날짜\n\n  const [content, setContent] = useState(\"\"); //내용\n\n  const [fontStyle1, setFontStyle1] = useState({\n    'background': \"linear-gradient(to top, #FFE400 50%, transparent 50%)\",\n    color: \"black\"\n  });\n  const [fontStyle2, setFontStyle2] = useState({\n    'background-color': \"transparent\",\n    color: \"lightgray\"\n  });\n  const [menu, setMenu] = useState(true);\n  const [menu1, setMenu1] = useState(true); //빌려줄게요\n\n  const [menu2, setMenu2] = useState(false); //빌려주세요\n  // 이미지 업로드 버튼 클릭 시, 서버로 이미지 폼 데이터 전송 --> 서버에서 이미지의 저장경로를 보내줌(미리보기에 사용가능[?])\n  // 게시글 업로드 클릭 시, 이미지의 저장경로를 다시 서버로 전송\n\n  const [previewImage, setPreviewImage] = useState([]);\n  const imagesRef = useRef();\n  const newFileList = []; //업로드 이미지 미리보기\n\n  const multipleImageHandler = e => {\n    e.preventDefault(); // var newFileList = [];\n\n    const uploadedFile = e.target.files;\n\n    for (var i = 0; i < uploadedFile.length; i++) {\n      let reader = new FileReader();\n      let file = uploadedFile[i];\n\n      if (e.target.files[0]) {\n        if (uploadedFile.length > 10) {\n          alert('사진은 10개까지 업로드 가능합니다');\n          break;\n        } else {\n          reader.readAsDataURL(file); // 이미지를 특정 Blob로 읽어서 저장 \n          //파일상태 업데이트 \n\n          reader.onloadend = () => {\n            newFileList.push({\n              file: file,\n              previewURL: reader.result\n            });\n          }; //업로드 다 된 후에 미리보기 \n\n\n          if (i === uploadedFile.length - 1) {\n            setTimeout(() => setPreviewImage(previewImg => previewImg.concat(newFileList)), 1000);\n          }\n        }\n      }\n    }\n  }; //이미지 삭제 \n\n\n  const removeImageHandler = id => {\n    const remainingImg = previewImage.filter((item, i) => i !== id);\n    setPreviewImage(remainingImg);\n  }; //글 등록 버튼 클릭 시  \n\n\n  const onSubmitWrite = e => {\n    e.preventDefault();\n\n    if (!title) {\n      alert('제목을 입력해주세요');\n      return;\n    }\n\n    if (!price) {\n      alert('가격을 입력해주세요');\n      return;\n    }\n\n    if (!content) {\n      alert('내용을 입력해주세요');\n      return;\n    } //빌려줄게요 게시판에 글쓰기\n\n\n    if (menu1 === true) {\n      e.preventDefault(); // setPreviewImage([]); \n\n      imagesRef.current.value = '';\n      const formData = new FormData();\n      const config = {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n\n      for (var i = 0; i < previewImage.length; i++) {\n        formData.append('img' + i, previewImage[i].file); //이미지 정보 \n      } // formData.append('imgUrl', previewImage); //이미지 url\n\n\n      formData.append('title', title);\n      formData.append('price', price);\n      formData.append('body', content);\n      formData.append('startDate', startDate);\n      formData.append('endDate', endDate);\n      formData.append('date', moment().format('YYYY.MM.DD HH:mm')); //        test\n\n      for (var i = 0; i < previewImage.length; i++) {\n        console.log('img' + i + '_test', previewImage[i].file);\n      }\n\n      return axios.post('http://localhost:7000/post/write/lend', formData, {\n        withCredentials: true\n      }).then(res => {\n        props.history.push('/'); //메인 화면으로이동\n      }).catch(error => {\n        console.log(error);\n      }, config);\n    } //빌려주세요 게시판에 글쓰기\n\n\n    if (menu2 === true) {\n      const data = {\n        title: title,\n        body: content,\n        price: price,\n        start_date: startDate,\n        end_date: endDate,\n        date: moment().format('YYYY.MM.DD HH:mm')\n      };\n      console.log(data);\n      axios.post('http://localhost:7000/post/write/borrow', data, {\n        withCredentials: true\n      }).then(res => {\n        props.history.push('/'); //메인 화면으로이동\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(PageStyled, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmitWrite,\n      children: [/*#__PURE__*/_jsxDEV(TopStyled, {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/\",\n            style: {\n              color: 'gray',\n              'font-size': '13px',\n              'font-weight': 'bold'\n            },\n            children: \"\\uCDE8\\uC18C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\uAC8C\\uC2DC\\uAE00 \\uC4F0\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            style: {\n              color: '#A352CC',\n              border: 'none',\n              background: 'none',\n              'font-weight': 'bold',\n              'font-size': '13px'\n            },\n            children: \"\\uB4F1\\uB85D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BoardStyled, {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/\",\n            onClick: e => {\n              e.preventDefault();\n              setMenu(true);\n              setMenu1(true);\n              setMenu2(false);\n              setFontStyle1({\n                'background': \"linear-gradient(to top, #FFE400 50%, transparent 50%)\",\n                color: \"black\"\n              });\n              setFontStyle2({\n                'background-color': \"transparent\",\n                color: \"lightgray\"\n              });\n            },\n            style: fontStyle1,\n            children: \"\\uBE4C\\uB824\\uC904\\uAC8C\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/\",\n            onClick: e => {\n              e.preventDefault();\n              setMenu(false);\n              setMenu1(false);\n              setMenu2(true);\n              setFontStyle1({\n                'background-color': \"transparent\",\n                color: \"lightgray\"\n              });\n              setFontStyle2({\n                'background': \"linear-gradient(to top, #FFE400 50%, transparent 50%)\",\n                color: \"black\"\n              });\n            },\n            style: fontStyle2,\n            children: \"\\uBE4C\\uB824\\uC8FC\\uC138\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), menu ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MainContainer, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"file\",\n            children: /*#__PURE__*/_jsxDEV(InitialBox, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"https://ifh.cc/g/219dfc.png\",\n                alt: \"camera_img\",\n                style: {\n                  width: '30px',\n                  'margin-bottom': '-13px',\n                  'padding-top': '10px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: 'gray',\n                  'font-size': '12px'\n                },\n                children: [previewImage.length, \"/10\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 18\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 14\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FileInput, {\n            type: \"file\",\n            id: \"file\",\n            multiple: true,\n            ref: imagesRef,\n            accept: \"image/*\",\n            onChange: multipleImageHandler,\n            style: {\n              visibility: \"hidden\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(Scroll, {\n            children: previewImage.map((file, i) => /*#__PURE__*/_jsxDEV(ImgAreaContainer, {\n              className: \"content\",\n              children: [/*#__PURE__*/_jsxDEV(ImgArea, {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: file.previewURL,\n                  style: {\n                    width: '60px',\n                    height: '60px',\n                    'white-space': 'nowrap'\n                  },\n                  alt: \"profile_preview\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 26\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(DeleteButton, {\n                onClick: e => {\n                  e.preventDefault();\n                  removeImageHandler(i);\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: del_img,\n                  style: {\n                    width: '11px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 94\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 14\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 18\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputStyled, {\n        type: \"title\",\n        name: \"title\",\n        placeholder: \"\\uC81C\\uBAA9\",\n        onChange: event => setTitle(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(InputStyled, {\n        type: \"number\",\n        name: \"price\",\n        placeholder: \"\\uAC00\\uACA9\",\n        onChange: event => setPrice(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(DivStyled, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(DateTitle, {\n            children: \"\\uB300\\uC5EC\\uC2DC\\uC791\\uC77C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(DatePickerStyled, {\n            dateFormat: \"yyyy/MM/dd\",\n            selected: startDate,\n            onChange: date => setStartDate(date),\n            selectsStart: true,\n            startDate: startDate,\n            endDate: endDate,\n            minDate: new Date(),\n            locale: ko\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(DateTitle, {\n            children: \"\\uB300\\uC5EC\\uC885\\uB8CC\\uC77C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DatePickerStyled, {\n            dateFormat: \"yyyy/MM/dd\",\n            selected: endDate,\n            onChange: date => setEndDate(date),\n            selectsEnd: true,\n            startDate: startDate,\n            endDate: endDate,\n            minDate: startDate,\n            locale: ko\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(TextStyled, {\n        name: \"content\",\n        placeholder: \"\\uB0B4\\uC6A9\",\n        onChange: event => setContent(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Write, \"gL22r65TPb2Jo1XGj4Dz2Kzr91M=\");\n\n_c16 = Write;\nexport default Write;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16;\n\n$RefreshReg$(_c, \"PageStyled\");\n$RefreshReg$(_c2, \"InputStyled\");\n$RefreshReg$(_c3, \"TextStyled\");\n$RefreshReg$(_c4, \"TopStyled\");\n$RefreshReg$(_c5, \"BoardStyled\");\n$RefreshReg$(_c6, \"DatePickerStyled\");\n$RefreshReg$(_c7, \"DateTitle\");\n$RefreshReg$(_c8, \"DivStyled\");\n$RefreshReg$(_c9, \"MainContainer\");\n$RefreshReg$(_c10, \"Scroll\");\n$RefreshReg$(_c11, \"InitialBox\");\n$RefreshReg$(_c12, \"ImgAreaContainer\");\n$RefreshReg$(_c13, \"ImgArea\");\n$RefreshReg$(_c14, \"FileInput\");\n$RefreshReg$(_c15, \"DeleteButton\");\n$RefreshReg$(_c16, \"Write\");","map":{"version":3,"sources":["C:/Users/sycho/Desktop/billage/Front-End/src/components/Write.jsx"],"names":["React","useState","useRef","useEffect","styled","axios","DatePicker","ko","moment","del_img","PageStyled","body","InputStyled","input","TextStyled","textarea","TopStyled","ul","BoardStyled","DatePickerStyled","DateTitle","div","DivStyled","MainContainer","Scroll","InitialBox","ImgAreaContainer","ImgArea","Img","img","FileInput","DeleteButton","button","Write","props","title","setTitle","price","setPrice","startDate","setStartDate","Date","endDate","setEndDate","content","setContent","fontStyle1","setFontStyle1","color","fontStyle2","setFontStyle2","menu","setMenu","menu1","setMenu1","menu2","setMenu2","previewImage","setPreviewImage","imagesRef","newFileList","multipleImageHandler","e","preventDefault","uploadedFile","target","files","i","length","reader","FileReader","file","alert","readAsDataURL","onloadend","push","previewURL","result","setTimeout","previewImg","concat","removeImageHandler","id","remainingImg","filter","item","onSubmitWrite","current","value","formData","FormData","config","headers","append","format","console","log","post","withCredentials","then","res","history","catch","error","data","start_date","end_date","date","border","background","width","visibility","map","height","event"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/alt-text */\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport styled from \"styled-components\";\r\nimport axios from 'axios';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { ko } from 'date-fns/esm/locale'\r\nimport moment from 'moment';\r\nimport 'moment/locale/ko';\r\nimport del_img from '../components/images/del.png'\r\n\r\nconst PageStyled=styled.body`\r\ndisplay:flex;\r\nflex-direction:column;\r\n// align-items:center;\r\n`;\r\nconst InputStyled = styled.input`\r\n        margin: 0px 20px;\r\n        border: none;\r\n        outline: none;\r\n        display: flex;\r\n        height: 50px;\r\n        width: 90%;\r\n  `;\r\nconst TextStyled = styled.textarea`\r\n        margin: 0px 20px;\r\n        border: none;\r\n        outline: none;\r\n        display: flex;\r\n        height: 300px;\r\n        width: 90%;\r\n  `;\r\nconst TopStyled=styled.ul` \r\n    height:25px;\r\n    display:flex;\r\n    align-items:center;\r\n    justify-content:space-between;\r\n    list-style:none;\r\n    margin-top:5;\r\n    padding:0 20px 0 20px;\r\n    color: black;\r\n    font-size:15px;\r\n    font-weight:bold;\r\n  `;\r\nconst BoardStyled = styled.ul`\r\n    display:flex;\r\n    align-items:center;\r\n    justify-content:space-evenly;\r\n    list-style:none;\r\n    margin:0;\r\n    padding:0 20px 0 20px;\r\n`;\r\n//시작일, 종료일 달력 스타일\r\nconst DatePickerStyled = styled(DatePicker)`\r\n    text-align: center;\r\n    width: 150px;\r\n    height: 30px;\r\n    font-size: 15px;\r\n    border-radius: 20px;\r\n    border: 1px solid gray;\r\n`;\r\nconst DateTitle = styled.div`\r\n    color: gray;\r\n    white-space: nowrap;\r\n    font-size: 13px;\r\n    margin-bottom: 5px;\r\n    margin-left : 43px;\r\n`;\r\nconst DivStyled = styled.div`\r\n    display: flex;\r\n    justify-content:space-evenly;\r\n`;\r\nconst MainContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n  margin-left: 15px;\r\n  @media (max-width: 400px) {\r\n    width: 100%;\r\n    max-width: 400px;\r\n    justify-content: start;\r\n    flex-wrap: wrap;\r\n  }\r\n`;\r\n//이미지-가로 스크롤\r\nconst Scroll = styled.div`\r\n  display: flex;\r\n  overflow-x:scroll;\r\n  white-space:nowrap;\r\n  ::-webkit-scrollbar { display: none; }\r\n`;\r\nconst InitialBox = styled.div`\r\n    width: 60px;\r\n    height: 60px;\r\n    border-radius:5px;\r\n    margin-right:10px;\r\n    border : solid 1px gray;\r\n    display : flex;\r\n    align-items: center;\r\n    flex-direction: column;\r\n`;\r\nconst ImgAreaContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\nconst ImgArea = styled.div`\r\n  width: 60px;\r\n  height: 60px;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 10px;\r\n  object-fit: cover;\r\n`;\r\nconst Img = styled.img`\r\n  object-fit: cover;\r\n  width: 100%;\r\n`;\r\nconst FileInput = styled.input`\r\n  position: absolute;\r\n  width: 1px;\r\n  height: 1px;\r\n  padding: 0;\r\n  margin: -1px;\r\n  overflow: hidden;\r\n  clip: rect(0, 0, 0, 0);\r\n  border: none;\r\n`;\r\n//이미지 삭제 버튼\r\nconst DeleteButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n  cursor: pointer;\r\n  margin-left: -17px;\r\n  margin-top: -46px;\r\n`;\r\n\r\nfunction Write(props) {\r\n    const [title, setTitle] = useState(\"\"); //제목\r\n    const [price, setPrice] = useState(\"\"); //가격\r\n\r\n    const [startDate, setStartDate] = useState(new Date()); //대여 시작 날짜\r\n    const [endDate, setEndDate] = useState(new Date()); //대여 끝 날짜\r\n    const [content, setContent] = useState(\"\"); //내용\r\n    const [fontStyle1, setFontStyle1]=useState({'background': \"linear-gradient(to top, #FFE400 50%, transparent 50%)\", color: \"black\"});\r\n    const [fontStyle2, setFontStyle2]=useState({'background-color': \"transparent\", color: \"lightgray\"});\r\n\r\n    const [menu, setMenu] = useState(true);   \r\n    const [menu1, setMenu1] = useState(true); //빌려줄게요\r\n    const [menu2, setMenu2] = useState(false); //빌려주세요\r\n\r\n    // 이미지 업로드 버튼 클릭 시, 서버로 이미지 폼 데이터 전송 --> 서버에서 이미지의 저장경로를 보내줌(미리보기에 사용가능[?])\r\n    // 게시글 업로드 클릭 시, 이미지의 저장경로를 다시 서버로 전송\r\n    \r\n    const [previewImage, setPreviewImage] = useState([]);\r\n    const imagesRef = useRef();\r\n    const newFileList = [];\r\n\r\n    //업로드 이미지 미리보기\r\n    const multipleImageHandler = e => {\r\n        e.preventDefault();\r\n        // var newFileList = [];\r\n        const uploadedFile = e.target.files;\r\n        \r\n        for (var i = 0; i < uploadedFile.length; i++) {\r\n          let reader = new FileReader();\r\n          let file = uploadedFile[i];\r\n          \r\n\r\n          if(e.target.files[0]) {\r\n            if(uploadedFile.length > 10){\r\n              alert('사진은 10개까지 업로드 가능합니다');\r\n              break;\r\n            }\r\n            else {\r\n              reader.readAsDataURL(file);// 이미지를 특정 Blob로 읽어서 저장 \r\n\r\n             //파일상태 업데이트 \r\n              reader.onloadend = () => {\r\n\r\n                  newFileList.push({\r\n                    file: file,\r\n                    previewURL: reader.result\r\n                  })\r\n              }\r\n\r\n              //업로드 다 된 후에 미리보기 \r\n              if (i === uploadedFile.length - 1) {\r\n                setTimeout(() => setPreviewImage(previewImg => previewImg.concat(newFileList)), 1000);\r\n              }\r\n            }\r\n          }\r\n  \r\n        }\r\n    }\r\n    //이미지 삭제 \r\n    const removeImageHandler = (id) => {\r\n        const remainingImg = previewImage.filter((item, i) => i !== id )\r\n        setPreviewImage(remainingImg)\r\n\r\n    }\r\n\r\n    //글 등록 버튼 클릭 시  \r\n    const onSubmitWrite = (e) => { \r\n\r\n        e.preventDefault();\r\n            if(!title){\r\n                alert('제목을 입력해주세요');\r\n                return;\r\n            }\r\n            if(!price){\r\n                alert('가격을 입력해주세요');\r\n                return;\r\n            }\r\n            if(!content){\r\n                alert('내용을 입력해주세요');\r\n                return;\r\n            }\r\n        //빌려줄게요 게시판에 글쓰기\r\n        if(menu1 === true) {\r\n\r\n          e.preventDefault();\r\n          // setPreviewImage([]); \r\n          imagesRef.current.value = '';\r\n      \r\n          const formData = new FormData();\r\n          const config = {\r\n                headers : {'content-type': 'multipart/form-data'}\r\n          }\r\n          \r\n          for(var i=0; i<previewImage.length; i++){\r\n            formData.append('img'+i, previewImage[i].file);   //이미지 정보 \r\n          }\r\n          // formData.append('imgUrl', previewImage); //이미지 url\r\n          formData.append('title', title);\r\n          formData.append('price', price);\r\n          formData.append('body', content);\r\n          formData.append('startDate', startDate);\r\n          formData.append('endDate', endDate);\r\n          formData.append('date', moment().format('YYYY.MM.DD HH:mm'));\r\n\r\n//        test\r\n          for(var i=0; i< previewImage.length;i++) {\r\n            console.log('img'+i+'_test', previewImage[i].file);\r\n          }\r\n\r\n           return axios.post('http://localhost:7000/post/write/lend', formData,\r\n            { withCredentials: true })\r\n              .then( (res) => {\r\n                props.history.push('/'); //메인 화면으로이동\r\n              })\r\n              .catch( (error)=> {\r\n                console.log(error);\r\n              }, config);\r\n        }\r\n\r\n        //빌려주세요 게시판에 글쓰기\r\n        if(menu2 === true) {\r\n          const data = {\r\n            title : title,\r\n            body : content,  \r\n            price : price, \r\n            start_date : startDate, \r\n            end_date : endDate,\r\n            date: moment().format('YYYY.MM.DD HH:mm')\r\n          };\r\n          console.log(data);\r\n          axios.post('http://localhost:7000/post/write/borrow', data,\r\n            { withCredentials: true })\r\n            .then( (res) => {\r\n              props.history.push('/'); //메인 화면으로이동\r\n            })\r\n            .catch( (error)=> {\r\n              console.log(error);\r\n            });\r\n          }\r\n    }\r\n\r\n  return (\r\n    <PageStyled>\r\n        <form onSubmit={onSubmitWrite}>\r\n        <TopStyled>\r\n            <li><a href=\"/\" style={{color: 'gray',  'font-size' : '13px', 'font-weight': 'bold'}}>취소</a></li>\r\n            <li>게시글 쓰기</li>\r\n            <li><button type=\"submit\" style={{color: '#A352CC', border:'none', background: 'none', 'font-weight': 'bold', 'font-size' : '13px'}}>등록</button></li>\r\n        </TopStyled>\r\n        \r\n        <hr/>\r\n        <BoardStyled>\r\n          <li><a href=\"/\" onClick={(e) => {e.preventDefault(); setMenu(true); setMenu1(true); setMenu2(false); setFontStyle1({'background': \"linear-gradient(to top, #FFE400 50%, transparent 50%)\", color: \"black\"}); setFontStyle2({'background-color': \"transparent\", color: \"lightgray\"})}} style={fontStyle1}>빌려줄게요</a></li>\r\n          <li><a href=\"/\" onClick={(e) => {e.preventDefault(); setMenu(false); setMenu1(false); setMenu2(true); setFontStyle1({'background-color': \"transparent\", color: \"lightgray\"}); setFontStyle2({'background': \"linear-gradient(to top, #FFE400 50%, transparent 50%)\", color: \"black\"})}} style={fontStyle2}>빌려주세요</a></li>\r\n        </BoardStyled>\r\n        \r\n        { menu ? <div>\r\n        <hr/>\r\n        <MainContainer>\r\n\r\n            <label htmlFor='file'>  \r\n             <InitialBox>\r\n                 <img src='https://ifh.cc/g/219dfc.png' alt=\"camera_img\" style={{width: '30px', 'margin-bottom': '-13px', 'padding-top' :'10px'}}></img>\r\n                 <p style={{color: 'gray', 'font-size' : '12px'}}>{previewImage.length}/10</p>\r\n             </InitialBox>\r\n             </label>\r\n             <FileInput type=\"file\" id=\"file\" multiple ref={imagesRef} accept=\"image/*\" onChange={multipleImageHandler} style={{ visibility: \"hidden\" }}/>\r\n \r\n            <Scroll>    \r\n              \r\n            {previewImage.map((file, i) => \r\n             <ImgAreaContainer key={i} className=\"content\">\r\n                <ImgArea><img src={file.previewURL} style={{width: '60px', height: '60px', 'white-space': 'nowrap'}} alt='profile_preview' /></ImgArea>\r\n                <DeleteButton onClick={(e) => {e.preventDefault(); removeImageHandler(i)} } ><img src={del_img} style={{width: '11px'}}/></DeleteButton>\r\n\r\n            </ImgAreaContainer>\r\n            )}\r\n               \r\n            </Scroll>\r\n\r\n   \r\n        </MainContainer>\r\n    \r\n        </div> : <div/> }\r\n      \r\n\r\n        <hr/>\r\n          <InputStyled\r\n                type=\"title\"\r\n                name=\"title\"\r\n                placeholder=\"제목\"\r\n                onChange={(event) => setTitle(event.target.value)} \r\n                /><hr/>\r\n          <InputStyled\r\n                type=\"number\"\r\n                name=\"price\"\r\n                placeholder=\"가격\"\r\n                onChange={(event) => setPrice(event.target.value)} \r\n                /><hr/>\r\n      \r\n          <DivStyled>\r\n              <div>\r\n          <DateTitle>대여시작일</DateTitle>\r\n\r\n          <DatePickerStyled\r\n            dateFormat=\"yyyy/MM/dd\"\r\n            selected={startDate}\r\n            onChange={date => setStartDate(date)}\r\n            selectsStart\r\n            startDate={startDate}\r\n            endDate={endDate}\r\n            minDate={new Date()}\r\n            locale={ko}\r\n            />\r\n            </div>\r\n            <div>\r\n            <DateTitle>대여종료일</DateTitle>\r\n            <DatePickerStyled\r\n            dateFormat=\"yyyy/MM/dd\"\r\n            selected={endDate}\r\n            onChange={date => setEndDate(date)}\r\n            selectsEnd\r\n            startDate={startDate}\r\n            endDate={endDate}\r\n            minDate={startDate}\r\n            locale={ko}\r\n            />\r\n            </div>\r\n          </DivStyled>\r\n            <hr/>\r\n          <TextStyled\r\n                name=\"content\"\r\n                placeholder=\"내용\"\r\n                onChange={(event) => setContent(event.target.value)} \r\n                />\r\n        </form>\r\n    </PageStyled>\r\n    )\r\n}\r\n\r\nexport default Write"]},"metadata":{},"sourceType":"module"}