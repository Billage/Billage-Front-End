{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sycho\\\\Desktop\\\\billage\\\\Front-End\\\\src\\\\components\\\\MyInfoEdit.jsx\",\n    _s2 = $RefreshSig$();\n\nimport React, { useCallback, useState, useEffect } from 'react';\nimport Logo from './Logo';\nimport axios from 'axios';\nimport Postcode from '@actbase/react-daum-postcode';\nimport Modal from 'react-modal';\nimport styled from \"styled-components\";\nimport { DownOutlined, UpOutlined } from '@ant-design/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Page = styled.body`\n    margin:0;\n    padding:20px;\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n`;\n_c = Page;\nconst InputComponent = styled.input`\n    border:none;\n    outline:none;\n    border-bottom: 1px solid #E5E5E5;\n    ::placeholder{\n        color:#E5E5E5;\n    }\n    width:250px;\n    height:40px;\n    margin-bottom:10px;\n`;\n_c2 = InputComponent;\nconst Label = styled.h2`  \nfont-size:14px;\ncolor:#7D7D7D;\nfont-weight:600;\n`;\n_c3 = Label;\nconst SubmitButton = styled.button`\n    margin-top:30px;\n    border:none;\n    width:350px;\n    height:50px;\n    background-color:#A352CC;\n    border-radius:5px;\n    color:white;\n    font-weight:bold;\n    font-size:18px;\n    text-align:center;\n`;\n_c4 = SubmitButton;\nconst Btn = styled.button`\n    border: 1px solid #EBCAFD;\n    background-color:white;\n    color:#EBCAFD;\n    width:80px;\n    height:30px;\n    border-radius:5px;\n    margin-left:12px;\n`;\n_c5 = Btn;\nconst CloseBtn = styled.div`\n     position:fixed;\n    top:0;\n    right:0;\n    height:20px;\n    margin:5px 10px 0px 0px;\n    padding:auto;\n    background:none;\n    color:#E5E5E5;\n    width:20px;\n    font-weight:bold;\n    text-align:center;\n    border-radius:2px;\n    cursor:pointer;\n`;\n_c6 = CloseBtn;\nconst Head = styled.div`\n    background-color:#A352CC;\n    height:60px;\n    text-align:center;\n    color:#ffffff;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    font-weight:bold;\n    font-size:20px; \n`;\n_c7 = Head;\n\nconst MyInfoEdit = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const useInput = (initValue = null) => {\n    _s();\n\n    const [value, setter] = useState(initValue);\n\n    const handler = e => {\n      if (e) setter(e.target.value);else setter(initValue);\n    };\n\n    return [value, handler];\n  };\n\n  _s(useInput, \"HWjoxsPwAOqCQsuN2WPzTx92b6A=\");\n\n  const [email, setEmail] = useInput('');\n  const [id, setId] = useInput('');\n  const [pw, setPw] = useInput('');\n  const [initNickname, setInitNickname] = useInput('');\n  const [nickname, setNickname] = useInput('');\n  const [showAddress, setShowAddress] = useState('');\n  const [fullAddress, setFullAddress] = useState(''); //주소의 경우, 사용자에게 보여주는 것은 showAddress로 '##동'으로만 나오고, full 주소는 fullAddress에 저장됩니다.\n\n  const [pwChk, setPwChk] = useState('');\n  const [pwError, setPwError] = useState(false);\n  const [chkNickname, setChkNickname] = useState(false); // const pwChkRef=useRef();\n  // const pwRef=useRef();\n\n  const [showPwd, setShowPwd] = useState(false); //비밀번호 설정 칸 보이는 여부\n\n  const [kakao, setKakao] = useState(false); // 유저 정보 가져오기\n\n  useEffect(() => {\n    //처음 페이지가 실행될 때, 로그인 상태바뀔때, 사용자 주소 바뀔때 실행됨\n    axios.get(\"http://localhost:7000/auth\", {\n      withCredentials: true\n    }).then(res => {\n      if (res.data) {\n        setEmail(res.data.email);\n        setId(res.data.id);\n        setNickname(res.data.nickname);\n        setInitNickname(res.data.nickname); //중복될 경우를 대비하여 \n\n        setShowAddress(res.data.showAddress);\n\n        if (res.data.kakao) {\n          //카카오 로그인을 한 사용자인지 확인하는 곳입니다. 알맞게 바꿔주세요!\n          setKakao(true);\n        }\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n\n  const onSubmitForm = e => {\n    e.preventDefault();\n\n    if (!(nickname && fullAddress)) {\n      alert(`모든 문항을 입력해주세요`);\n      return;\n    }\n\n    if (showPwd && !(pw && pwChk)) {\n      alert(`변경할 비밀번호를 입력해주세요`);\n      return;\n    } else {\n      //  입력하지 않은 문항 알려주는 것 추가 예정\n      if (showPwd && !/^[A-Za-z0-9]{6,12}$/.test(pw)) {\n        alert('영문, 숫자 포함 6-12자리의 비밀번호를 입력해주세요.');\n        return;\n      }\n\n      if (!chkNickname) {\n        alert('닉네임 중복확인을 완료해주세요.');\n        return;\n      }\n\n      axios.post('url을 입력해주세요', {\n        password: pw,\n        nickname: nickname,\n        address: fullAddress,\n        showAddress: showAddress\n      }).then(res => {\n        console.log(res);\n      }).catch(error => {\n        console.log(error);\n      });\n      alert('수정되었습니다');\n    }\n  };\n\n  const onChangeChkPw = e => {\n    if (!pw) {\n      alert('비밀번호를 먼저 입력해주세요.');\n      setPwChk('');\n    } else {\n      setPwError(e.target.value !== pw);\n      setPwChk(e.target.value);\n    }\n  };\n\n  const [isModal, setModal] = useState(false);\n\n  const modal = e => {\n    e.preventDefault();\n    if (isModal) setModal(false);else setModal(true);\n  };\n\n  const onClickChk = e => {\n    e.preventDefault();\n\n    if (e.target.value === 'nickname') {\n      //닉네임 정보 받아오는 곳\n      if (!nickname) {\n        alert('입력창에 먼저 입력해주세요.');\n        return;\n      } else {\n        //여기에서 axios 통신하시고, 아래 주석처리된 if문 괄호도 채워서 주석 해제해주세요\n        axios.get('').then(res => {//성공적으로 통신했을 때\n          // if() { //이미 저장된 닉네임이 아니라면\n          //     alert('사용 가능한 닉네임입니다.');\n          //     setChkNickname(true);\n          // } else{ //이미 저장된 닉네임이라면 \n          //     alert('이미 사용중인 닉네임입니다.');\n          //     setNickname(nickname);\n          // }\n        }).catch(error => {\n          console.log(error);\n        }); //에러처리\n      }\n    }\n  };\n\n  const clickPwd = e => {\n    e.preventDefault();\n    if (!showPwd) setShowPwd(true);else setShowPwd(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      style: {\n        marginBottom: '30px'\n      },\n      children: \"\\uB0B4 \\uC815\\uBCF4 \\uC218\\uC815\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Page, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"\\uC774\\uBA54\\uC77C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(InputComponent, {\n          value: email,\n          onChange: setEmail,\n          name: \"email\",\n          label: \"\\uC774\\uBA54\\uC77C\",\n          placeholder: \"\\uC0AC\\uC6A9\\uC790 \\uC774\\uBA54\\uC77C\",\n          readOnly: true,\n          style: {\n            color: '#EBCAFD',\n            fontStyle: 'bold'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: \"\\uC544\\uC774\\uB514\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(InputComponent, {\n          onChange: setId,\n          value: id,\n          name: \"id\",\n          label: \"\\uC544\\uC774\\uB514\",\n          readOnly: true,\n          style: {\n            color: '#EBCAFD',\n            fontStyle: 'bold'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 5\n        }, this), !kakao ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: clickPwd,\n            style: !showPwd ? {\n              marginBottom: '20px'\n            } : null,\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              style: {\n                display: 'inline'\n              },\n              children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'inline-block',\n                color: '#7D7D7D',\n                fontSize: '12px',\n                fontStyle: 'bold',\n                textAlign: 'center',\n                marginLeft: '5px'\n              },\n              children: [\"  \", showPwd ? /*#__PURE__*/_jsxDEV(UpOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 50\n              }, this) : /*#__PURE__*/_jsxDEV(DownOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 65\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 9\n          }, this), showPwd ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(InputComponent, {\n              value: pw,\n              onChange: setPw,\n              name: \"newPassword\",\n              label: \"\\uC0C8\\uB85C\\uC6B4 \\uBE44\\uBC00\\uBC88\\uD638\",\n              placeholder: \"\\uC601\\uBB38, \\uC22B\\uC790 \\uD3EC\\uD568 6-12\\uC790\\uB9AC\",\n              type: \"password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(Label, {\n              children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(InputComponent, {\n              value: pwChk,\n              onChange: onChangeChkPw,\n              name: \"passwordChk\",\n              label: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",\n              type: \"password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 5\n            }, this), pwError && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: '#F79F81',\n                fontSize: '10px'\n              },\n              children: \"\\uBE44\\uBC00\\uBC88\\uD638\\uAC00 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 16\n          }, this) : null, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 5\n        }, this) : null, \"  \", /*#__PURE__*/_jsxDEV(Label, {\n          children: \"\\uB2C9\\uB124\\uC784\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(InputComponent, {\n          onChange: setNickname,\n          value: nickname,\n          name: \"nickname\",\n          label: \"\\uB2C9\\uB124\\uC784\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Btn, {\n          onClick: onClickChk,\n          value: \"nickname\",\n          children: \"\\uC911\\uBCF5\\uD655\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: \"\\uC8FC\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(InputComponent, {\n          onChange: setShowAddress,\n          value: showAddress,\n          name: \"showAddress\",\n          label: \"\\uC8FC\\uC18C\",\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(Btn, {\n          onClick: modal,\n          children: \"\\uC8FC\\uC18C\\uCC3E\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          isOpen: isModal,\n          style: {\n            width: '150px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Postcode, {\n            style: {\n              width: 320,\n              height: 320\n            },\n            jsOptions: {\n              animated: true,\n              hemaileMapBtn: true\n            },\n            onSelected: data => {\n              setShowAddress(data.bname);\n              setFullAddress(data.address);\n              setModal(false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(CloseBtn, {\n            onClick: modal,\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(SubmitButton, {\n            onClick: onSubmitForm,\n            children: \"\\uC218\\uC815\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s2(MyInfoEdit, \"ZxFLSM7hHPTyfc5pp5kHi08BVTw=\", true);\n\n_c8 = MyInfoEdit;\nexport default MyInfoEdit;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"Page\");\n$RefreshReg$(_c2, \"InputComponent\");\n$RefreshReg$(_c3, \"Label\");\n$RefreshReg$(_c4, \"SubmitButton\");\n$RefreshReg$(_c5, \"Btn\");\n$RefreshReg$(_c6, \"CloseBtn\");\n$RefreshReg$(_c7, \"Head\");\n$RefreshReg$(_c8, \"MyInfoEdit\");","map":{"version":3,"sources":["C:/Users/sycho/Desktop/billage/Front-End/src/components/MyInfoEdit.jsx"],"names":["React","useCallback","useState","useEffect","Logo","axios","Postcode","Modal","styled","DownOutlined","UpOutlined","Page","body","InputComponent","input","Label","h2","SubmitButton","button","Btn","CloseBtn","div","Head","MyInfoEdit","useInput","initValue","value","setter","handler","e","target","email","setEmail","id","setId","pw","setPw","initNickname","setInitNickname","nickname","setNickname","showAddress","setShowAddress","fullAddress","setFullAddress","pwChk","setPwChk","pwError","setPwError","chkNickname","setChkNickname","showPwd","setShowPwd","kakao","setKakao","get","withCredentials","then","res","data","catch","error","console","log","onSubmitForm","preventDefault","alert","test","post","password","address","onChangeChkPw","isModal","setModal","modal","onClickChk","clickPwd","marginBottom","color","fontStyle","display","fontSize","textAlign","marginLeft","width","height","animated","hemaileMapBtn","bname"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,WAAf,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAsD,OAAtD;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,8BAArB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAAQC,YAAR,EAAsBC,UAAtB,QAAwC,mBAAxC;;;AACA,MAAMC,IAAI,GAACH,MAAM,CAACI,IAAK;AACvB;AACA;AACA;AACA;AACA;AACA,CANA;KAAMD,I;AAON,MAAME,cAAc,GAACL,MAAM,CAACM,KAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;MAAMD,c;AAWN,MAAME,KAAK,GAACP,MAAM,CAACQ,EAAG;AACtB;AACA;AACA;AACA,CAJA;MAAMD,K;AAMN,MAAME,YAAY,GAACT,MAAM,CAACU,MAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAXA;MAAMD,Y;AAYN,MAAME,GAAG,GAACX,MAAM,CAACU,MAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CARA;MAAMC,G;AAUN,MAAMC,QAAQ,GAACZ,MAAM,CAACa,GAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAdA;MAAMD,Q;AAeN,MAAME,IAAI,GAAGd,MAAM,CAACa,GAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;MAAMC,I;;AAWN,MAAMC,UAAU,GAAC,MAAI;AAAA;;AAAA;;AACjB,QAAMC,QAAQ,GAAG,CAACC,SAAS,GAAG,IAAb,KAAqB;AAAA;;AAClC,UAAM,CAACC,KAAD,EAAOC,MAAP,IAAiBzB,QAAQ,CAACuB,SAAD,CAA/B;;AAEA,UAAMG,OAAO,GAAIC,CAAD,IAAO;AACnB,UAAGA,CAAH,EAAMF,MAAM,CAACE,CAAC,CAACC,MAAF,CAASJ,KAAV,CAAN,CAAN,KACKC,MAAM,CAACF,SAAD,CAAN;AACR,KAHD;;AAIA,WAAO,CAACC,KAAD,EAAOE,OAAP,CAAP;AACH,GARD;;AADiB,KACXJ,QADW;;AAYjB,QAAM,CAACO,KAAD,EAAOC,QAAP,IAAmBR,QAAQ,CAAC,EAAD,CAAjC;AACA,QAAM,CAACS,EAAD,EAAKC,KAAL,IAAYV,QAAQ,CAAC,EAAD,CAA1B;AACA,QAAM,CAACW,EAAD,EAAIC,KAAJ,IAAaZ,QAAQ,CAAC,EAAD,CAA3B;AACA,QAAM,CAACa,YAAD,EAAcC,eAAd,IAAiCd,QAAQ,CAAC,EAAD,CAA/C;AACA,QAAM,CAACe,QAAD,EAAUC,WAAV,IAAyBhB,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACiB,WAAD,EAAaC,cAAb,IAAgCxC,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACyC,WAAD,EAAaC,cAAb,IAA6B1C,QAAQ,CAAC,EAAD,CAA3C,CAlBiB,CAmBjB;;AACA,QAAM,CAAC2C,KAAD,EAAOC,QAAP,IAAiB5C,QAAQ,CAAC,EAAD,CAA/B;AACA,QAAM,CAAC6C,OAAD,EAASC,UAAT,IAAqB9C,QAAQ,CAAC,KAAD,CAAnC;AACA,QAAM,CAAC+C,WAAD,EAAaC,cAAb,IAA6BhD,QAAQ,CAAC,KAAD,CAA3C,CAtBiB,CAuBjB;AACA;;AACA,QAAM,CAAEiD,OAAF,EAAWC,UAAX,IAA0BlD,QAAQ,CAAC,KAAD,CAAxC,CAzBiB,CAyB+B;;AAEhD,QAAM,CAACmD,KAAD,EAAOC,QAAP,IAAkBpD,QAAQ,CAAC,KAAD,CAAhC,CA3BiB,CA8Bf;;AACFC,EAAAA,SAAS,CAAC,MAAM;AAAG;AACfE,IAAAA,KAAK,CAACkD,GAAN,CAAU,4BAAV,EAAwC;AAAEC,MAAAA,eAAe,EAAE;AAAnB,KAAxC,EACCC,IADD,CACOC,GAAD,IAAO;AACT,UAAGA,GAAG,CAACC,IAAP,EAAY;AACR3B,QAAAA,QAAQ,CAAC0B,GAAG,CAACC,IAAJ,CAAS5B,KAAV,CAAR;AACAG,QAAAA,KAAK,CAACwB,GAAG,CAACC,IAAJ,CAAS1B,EAAV,CAAL;AACAO,QAAAA,WAAW,CAACkB,GAAG,CAACC,IAAJ,CAASpB,QAAV,CAAX;AACAD,QAAAA,eAAe,CAACoB,GAAG,CAACC,IAAJ,CAASpB,QAAV,CAAf,CAJQ,CAI4B;;AACpCG,QAAAA,cAAc,CAACgB,GAAG,CAACC,IAAJ,CAASlB,WAAV,CAAd;;AACA,YAAGiB,GAAG,CAACC,IAAJ,CAASN,KAAZ,EAAkB;AAAE;AAChBC,UAAAA,QAAQ,CAAC,IAAD,CAAR;AACH;AACJ;AACJ,KAZD,EAYGM,KAZH,CAYUC,KAAD,IAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAdD;AAeH,GAhBQ,EAgBN,EAhBM,CAAT;;AAiBA,QAAMG,YAAY,GAAEnC,CAAD,IAAK;AACpBA,IAAAA,CAAC,CAACoC,cAAF;;AACA,QAAG,EAAE1B,QAAQ,IAAEI,WAAZ,CAAH,EAA4B;AACxBuB,MAAAA,KAAK,CAAE,eAAF,CAAL;AACA;AACH;;AACD,QAAGf,OAAO,IAAE,EAAEhB,EAAE,IAAEU,KAAN,CAAZ,EAAyB;AACrBqB,MAAAA,KAAK,CAAE,kBAAF,CAAL;AACA;AACH,KAHD,MAII;AACJ;AAEA,UAAGf,OAAO,IAAG,CAAC,sBAAsBgB,IAAtB,CAA2BhC,EAA3B,CAAd,EAA8C;AAC1C+B,QAAAA,KAAK,CAAC,iCAAD,CAAL;AACA;AACH;;AACD,UAAG,CAACjB,WAAJ,EAAgB;AACZiB,QAAAA,KAAK,CAAC,mBAAD,CAAL;AACA;AACH;;AACD7D,MAAAA,KAAK,CAAC+D,IAAN,CAAW,aAAX,EAA0B;AAClBC,QAAAA,QAAQ,EAAElC,EADQ;AAElBI,QAAAA,QAAQ,EAACA,QAFS;AAGlB+B,QAAAA,OAAO,EAAC3B,WAHU;AAIlBF,QAAAA,WAAW,EAACA;AAJM,OAA1B,EAMIgB,IANJ,CAMWC,GAAD,IAAS;AACfI,QAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACD,OARH,EASGE,KATH,CASWC,KAAD,IAAU;AACjBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,OAXH;AAaDK,MAAAA,KAAK,CAAC,SAAD,CAAL;AAEF;AACJ,GArCG;;AAsCA,QAAMK,aAAa,GAAE1C,CAAD,IAAK;AACrB,QAAG,CAACM,EAAJ,EAAQ;AACJ+B,MAAAA,KAAK,CAAC,kBAAD,CAAL;AACApB,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACH,KAHD,MAII;AACJE,MAAAA,UAAU,CAACnB,CAAC,CAACC,MAAF,CAASJ,KAAT,KAAiBS,EAAlB,CAAV;AACAW,MAAAA,QAAQ,CAACjB,CAAC,CAACC,MAAF,CAASJ,KAAV,CAAR;AACC;AACJ,GATD;;AAUA,QAAM,CAAC8C,OAAD,EAAUC,QAAV,IAAsBvE,QAAQ,CAAC,KAAD,CAApC;;AACA,QAAMwE,KAAK,GAAE7C,CAAD,IAAK;AACbA,IAAAA,CAAC,CAACoC,cAAF;AACA,QAAGO,OAAH,EAAYC,QAAQ,CAAC,KAAD,CAAR,CAAZ,KACKA,QAAQ,CAAC,IAAD,CAAR;AACR,GAJD;;AAMA,QAAME,UAAU,GAAE9C,CAAD,IAAK;AAClBA,IAAAA,CAAC,CAACoC,cAAF;;AACA,QAAGpC,CAAC,CAACC,MAAF,CAASJ,KAAT,KAAiB,UAApB,EAA+B;AAAE;AAC7B,UAAG,CAACa,QAAJ,EAAc;AACV2B,QAAAA,KAAK,CAAC,iBAAD,CAAL;AACA;AACH,OAHD,MAII;AAAE;AACF7D,QAAAA,KAAK,CAACkD,GAAN,CAAU,EAAV,EACCE,IADD,CACOC,GAAD,IAAQ,CAAE;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACH,SATD,EAUCE,KAVD,CAUQC,KAAD,IAAU;AAAEC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAAqB,SAVxC,EADA,CAW0C;AAC7C;AACJ;AAEJ,GAtBD;;AAuBA,QAAMe,QAAQ,GAAE/C,CAAD,IAAK;AAChBA,IAAAA,CAAC,CAACoC,cAAF;AACD,QAAG,CAACd,OAAJ,EAAYC,UAAU,CAAC,IAAD,CAAV,CAAZ,KACMA,UAAU,CAAC,KAAD,CAAV;AAER,GALD;;AAMA,sBACA;AAAA,4BACA,QAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACyB,QAAAA,YAAY,EAAC;AAAd,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADA,eAEA,QAAC,IAAD;AAAA,6BACA;AAAA,gCAEA,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFA,eAGA,QAAC,cAAD;AACI,UAAA,KAAK,EAAE9C,KADX;AAEI,UAAA,QAAQ,EAAEC,QAFd;AAGI,UAAA,IAAI,EAAC,OAHT;AAII,UAAA,KAAK,EAAC,oBAJV;AAKI,UAAA,WAAW,EAAC,uCALhB;AAMI,UAAA,QAAQ,MANZ;AAOI,UAAA,KAAK,EAAE;AAAC8C,YAAAA,KAAK,EAAC,SAAP;AAAkBC,YAAAA,SAAS,EAAC;AAA5B;AAPX;AAAA;AAAA;AAAA;AAAA,gBAHA,eAYA,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZA,eAaA,QAAC,cAAD;AACI,UAAA,QAAQ,EAAE7C,KADd;AAEI,UAAA,KAAK,EAAED,EAFX;AAGI,UAAA,IAAI,EAAC,IAHT;AAII,UAAA,KAAK,EAAC,oBAJV;AAKI,UAAA,QAAQ,MALZ;AAMI,UAAA,KAAK,EAAE;AAAC6C,YAAAA,KAAK,EAAC,SAAP;AAAkBC,YAAAA,SAAS,EAAC;AAA5B;AANX;AAAA;AAAA;AAAA;AAAA,gBAbA,EAqBC,CAAC1B,KAAD,gBACD;AAAA,kCACI;AAAK,YAAA,OAAO,EAAEuB,QAAd;AAAwB,YAAA,KAAK,EAAE,CAACzB,OAAD,GAAU;AAAC0B,cAAAA,YAAY,EAAC;AAAd,aAAV,GAAkC,IAAjE;AAAA,oCACC,QAAC,KAAD;AAAO,cAAA,KAAK,EAAE;AAACG,gBAAAA,OAAO,EAAC;AAAT,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADD,eAEC;AAAK,cAAA,KAAK,EAAE;AAACA,gBAAAA,OAAO,EAAC,cAAT;AAAwBF,gBAAAA,KAAK,EAAC,SAA9B;AAAwCG,gBAAAA,QAAQ,EAAC,MAAjD;AAAwDF,gBAAAA,SAAS,EAAC,MAAlE;AAAyEG,gBAAAA,SAAS,EAAC,QAAnF;AAA6FC,gBAAAA,UAAU,EAAC;AAAxG,eAAZ;AAAA,+BAC+BhC,OAAO,gBAAE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,sBAAF,gBAAiB,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,sBADvD;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAQCA,OAAO,gBAAG;AAAA,oCACX,QAAC,cAAD;AACI,cAAA,KAAK,EAAEhB,EADX;AAEI,cAAA,QAAQ,EAAEC,KAFd;AAGI,cAAA,IAAI,EAAC,aAHT;AAII,cAAA,KAAK,EAAC,6CAJV;AAKI,cAAA,WAAW,EAAC,0DALhB;AAMI,cAAA,IAAI,EAAC;AANT;AAAA;AAAA;AAAA;AAAA,oBADW,eASX,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBATW,eAUX,QAAC,cAAD;AACI,cAAA,KAAK,EAAES,KADX;AAEI,cAAA,QAAQ,EAAE0B,aAFd;AAGI,cAAA,IAAI,EAAC,aAHT;AAII,cAAA,KAAK,EAAC,uCAJV;AAKI,cAAA,IAAI,EAAC;AALT;AAAA;AAAA;AAAA;AAAA,oBAVW,EAgBVxB,OAAO,iBAAE;AAAK,cAAA,KAAK,EAAE;AAAC+B,gBAAAA,KAAK,EAAG,SAAT;AAAoBG,gBAAAA,QAAQ,EAAE;AAA9B,eAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAhBC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAH,GAiBC,IAzBT;AAAA;AAAA;AAAA;AAAA;AAAA,gBADC,GA2BQ,IAhDT,qBAiDA,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjDA,eAkDA,QAAC,cAAD;AACI,UAAA,QAAQ,EAAEzC,WADd;AAEI,UAAA,KAAK,EAAED,QAFX;AAGI,UAAA,IAAI,EAAC,UAHT;AAII,UAAA,KAAK,EAAC;AAJV;AAAA;AAAA;AAAA;AAAA,gBAlDA,eAuDA,QAAC,GAAD;AAAK,UAAA,OAAO,EAAEoC,UAAd;AAA2B,UAAA,KAAK,EAAC,UAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvDA,eAwDA,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxDA,eAyDK,QAAC,cAAD;AACD,UAAA,QAAQ,EAAEjC,cADT;AAED,UAAA,KAAK,EAAED,WAFN;AAGD,UAAA,IAAI,EAAC,aAHJ;AAID,UAAA,KAAK,EAAC,cAJL;AAKD,UAAA,QAAQ;AALP;AAAA;AAAA;AAAA;AAAA,gBAzDL,eAgEI,QAAC,GAAD;AAAK,UAAA,OAAO,EAAEiC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAhEJ,eAkEC,QAAC,KAAD;AAAO,UAAA,MAAM,EAAEF,OAAf;AAAwB,UAAA,KAAK,EAAE;AAACY,YAAAA,KAAK,EAAC;AAAP,WAA/B;AAAA,kCACG,QAAC,QAAD;AACC,YAAA,KAAK,EAAE;AAAEA,cAAAA,KAAK,EAAE,GAAT;AAAcC,cAAAA,MAAM,EAAE;AAAtB,aADR;AAEE,YAAA,SAAS,EAAE;AAAEC,cAAAA,QAAQ,EAAE,IAAZ;AAAkBC,cAAAA,aAAa,EAAE;AAAjC,aAFb;AAGE,YAAA,UAAU,EAAE5B,IAAI,IAAI;AAClBjB,cAAAA,cAAc,CAACiB,IAAI,CAAC6B,KAAN,CAAd;AACA5C,cAAAA,cAAc,CAACe,IAAI,CAACW,OAAN,CAAd;AACAG,cAAAA,QAAQ,CAAC,KAAD,CAAR;AACD;AAPH;AAAA;AAAA;AAAA;AAAA,kBADH,eAUG,QAAC,QAAD;AAAU,YAAA,OAAO,EAAEC,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVH;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlED,eA+EA;AAAA,iCACA,QAAC,YAAD;AACI,YAAA,OAAO,EAAEV,YADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,gBA/EA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YAFA;AAAA,kBADA;AA6FH,CAjOD;;IAAMzC,U;;MAAAA,U;AAkON,eAAeA,UAAf","sourcesContent":["import React, {useCallback, useState, useEffect} from 'react';\r\nimport Logo from './Logo';\r\nimport axios from 'axios';\r\nimport Postcode from '@actbase/react-daum-postcode';\r\nimport Modal from 'react-modal';\r\nimport styled from \"styled-components\";\r\nimport {DownOutlined, UpOutlined } from '@ant-design/icons';\r\nconst Page=styled.body`\r\n    margin:0;\r\n    padding:20px;\r\n    display:flex;\r\n    flex-direction:column;\r\n    align-items:center;\r\n`;\r\nconst InputComponent=styled.input`\r\n    border:none;\r\n    outline:none;\r\n    border-bottom: 1px solid #E5E5E5;\r\n    ::placeholder{\r\n        color:#E5E5E5;\r\n    }\r\n    width:250px;\r\n    height:40px;\r\n    margin-bottom:10px;\r\n`;\r\nconst Label=styled.h2`  \r\nfont-size:14px;\r\ncolor:#7D7D7D;\r\nfont-weight:600;\r\n`;\r\n\r\nconst SubmitButton=styled.button`\r\n    margin-top:30px;\r\n    border:none;\r\n    width:350px;\r\n    height:50px;\r\n    background-color:#A352CC;\r\n    border-radius:5px;\r\n    color:white;\r\n    font-weight:bold;\r\n    font-size:18px;\r\n    text-align:center;\r\n`;\r\nconst Btn=styled.button`\r\n    border: 1px solid #EBCAFD;\r\n    background-color:white;\r\n    color:#EBCAFD;\r\n    width:80px;\r\n    height:30px;\r\n    border-radius:5px;\r\n    margin-left:12px;\r\n`;\r\n\r\nconst CloseBtn=styled.div`\r\n     position:fixed;\r\n    top:0;\r\n    right:0;\r\n    height:20px;\r\n    margin:5px 10px 0px 0px;\r\n    padding:auto;\r\n    background:none;\r\n    color:#E5E5E5;\r\n    width:20px;\r\n    font-weight:bold;\r\n    text-align:center;\r\n    border-radius:2px;\r\n    cursor:pointer;\r\n`;\r\nconst Head = styled.div`\r\n    background-color:#A352CC;\r\n    height:60px;\r\n    text-align:center;\r\n    color:#ffffff;\r\n    display:flex;\r\n    justify-content:center;\r\n    align-items:center;\r\n    font-weight:bold;\r\n    font-size:20px; \r\n`;\r\nconst MyInfoEdit=()=>{\r\n    const useInput = (initValue = null) =>{\r\n        const [value,setter] = useState(initValue);\r\n       \r\n        const handler = (e) => {\r\n            if(e) setter(e.target.value);\r\n            else setter(initValue);\r\n        };\r\n        return [value,handler];\r\n    };\r\n   \r\n    \r\n    const [email,setEmail] = useInput('');\r\n    const [id, setId]=useInput('');\r\n    const [pw,setPw] = useInput('');\r\n    const [initNickname,setInitNickname] = useInput('');\r\n    const [nickname,setNickname] = useInput('');\r\n    const [showAddress,setShowAddress] =  useState('');\r\n    const [fullAddress,setFullAddress]=useState('');\r\n    //주소의 경우, 사용자에게 보여주는 것은 showAddress로 '##동'으로만 나오고, full 주소는 fullAddress에 저장됩니다.\r\n    const [pwChk,setPwChk]=useState('');\r\n    const [pwError,setPwError]=useState(false);\r\n    const [chkNickname,setChkNickname]=useState(false);\r\n    // const pwChkRef=useRef();\r\n    // const pwRef=useRef();\r\n    const [ showPwd, setShowPwd ] = useState(false) //비밀번호 설정 칸 보이는 여부\r\n\r\n    const [kakao,setKakao] =useState(false);\r\n\r\n\r\n      // 유저 정보 가져오기\r\n    useEffect(() => {  //처음 페이지가 실행될 때, 로그인 상태바뀔때, 사용자 주소 바뀔때 실행됨\r\n        axios.get(\"http://localhost:7000/auth\", { withCredentials: true })\r\n        .then((res)=>{\r\n            if(res.data){\r\n                setEmail(res.data.email);\r\n                setId(res.data.id);\r\n                setNickname(res.data.nickname);\r\n                setInitNickname(res.data.nickname); //중복될 경우를 대비하여 \r\n                setShowAddress(res.data.showAddress);\r\n                if(res.data.kakao){ //카카오 로그인을 한 사용자인지 확인하는 곳입니다. 알맞게 바꿔주세요!\r\n                    setKakao(true);\r\n                }\r\n            }\r\n        }).catch((error)=>{\r\n            console.log(error);\r\n        })\r\n    }, []);\r\n    const onSubmitForm=(e)=>{\r\n        e.preventDefault();\r\n        if(!(nickname&&fullAddress)){\r\n            alert(`모든 문항을 입력해주세요`);\r\n            return;\r\n        }\r\n        if(showPwd&&!(pw&&pwChk)){\r\n            alert(`변경할 비밀번호를 입력해주세요`);\r\n            return;\r\n        }\r\n        else{\r\n        //  입력하지 않은 문항 알려주는 것 추가 예정\r\n        \r\n        if(showPwd&&(!/^[A-Za-z0-9]{6,12}$/.test(pw))){\r\n            alert('영문, 숫자 포함 6-12자리의 비밀번호를 입력해주세요.');\r\n            return;\r\n        }\r\n        if(!chkNickname){\r\n            alert('닉네임 중복확인을 완료해주세요.');\r\n            return;\r\n        }\r\n        axios.post('url을 입력해주세요', {\r\n                password: pw,\r\n                nickname:nickname,\r\n                address:fullAddress,\r\n                showAddress:showAddress,\r\n            }\r\n          ).then( (res) => {\r\n            console.log(res);\r\n          })\r\n          .catch( (error)=> {\r\n           console.log(error);\r\n          });\r\n    \r\n       alert('수정되었습니다');\r\n        \r\n    }\r\n};\r\n    const onChangeChkPw=(e)=>{\r\n        if(!pw) {\r\n            alert('비밀번호를 먼저 입력해주세요.');\r\n            setPwChk('');\r\n        }\r\n        else{\r\n        setPwError(e.target.value!==pw);\r\n        setPwChk(e.target.value);\r\n        }\r\n    };\r\n    const [isModal, setModal] = useState(false);\r\n    const modal=(e)=>{\r\n        e.preventDefault();\r\n        if(isModal) setModal(false);\r\n        else setModal(true);\r\n    };\r\n\r\n    const onClickChk=(e)=>{\r\n        e.preventDefault();\r\n        if(e.target.value==='nickname'){ //닉네임 정보 받아오는 곳\r\n            if(!nickname) {\r\n                alert('입력창에 먼저 입력해주세요.');\r\n                return;\r\n            }\r\n            else{ //여기에서 axios 통신하시고, 아래 주석처리된 if문 괄호도 채워서 주석 해제해주세요\r\n                axios.get('')\r\n                .then((res)=> { //성공적으로 통신했을 때\r\n                    // if() { //이미 저장된 닉네임이 아니라면\r\n                    //     alert('사용 가능한 닉네임입니다.');\r\n                    //     setChkNickname(true);\r\n                    // } else{ //이미 저장된 닉네임이라면 \r\n                    //     alert('이미 사용중인 닉네임입니다.');\r\n                    //     setNickname(nickname);\r\n                    // }\r\n                })\r\n                .catch((error)=> { console.log(error); }) //에러처리\r\n            }\r\n        }\r\n\r\n    };\r\n    const clickPwd=(e)=>{\r\n        e.preventDefault();\r\n       if(!showPwd)setShowPwd(true);\r\n       else  setShowPwd(false);\r\n\r\n    };\r\n    return(\r\n    <>\r\n    <Head style={{marginBottom:'30px'}}>내 정보 수정</Head>   \r\n    <Page >\r\n    <form>\r\n    {/* 이메일 부분에는 사용자 이메일이 들어오고, 수정은 불가합니다 */}\r\n    <Label>이메일</Label>\r\n    <InputComponent \r\n        value={email} \r\n        onChange={setEmail}\r\n        name=\"email\"\r\n        label=\"이메일\" \r\n        placeholder=\"사용자 이메일\"\r\n        readOnly\r\n        style={{color:'#EBCAFD', fontStyle:'bold'}} /> \r\n        {/* 아이디 부분에는 사용자 아이디가 들어오고, 수정은 불가합니다 */}\r\n    <Label>아이디</Label>\r\n    <InputComponent   \r\n        onChange={setId}\r\n        value={id}\r\n        name=\"id\" \r\n        label=\"아이디\" \r\n        readOnly \r\n        style={{color:'#EBCAFD', fontStyle:'bold'}}/>\r\n    {/* 카카오 로그인 확인 */}\r\n    {!kakao ? \r\n    <div>\r\n        <div onClick={clickPwd} style={!showPwd? {marginBottom:'20px'} : null}>\r\n         <Label style={{display:'inline'}}>비밀번호 변경</Label>\r\n         <div style={{display:'inline-block',color:'#7D7D7D',fontSize:'12px',fontStyle:'bold',textAlign:'center', marginLeft:'5px'}}>\r\n       {/* 비밀번호 변경 칸 누를 때마다 아이콘 바뀜*/}  {showPwd? <UpOutlined/>: <DownOutlined />}\r\n         </div>\r\n         </div>\r\n          {/* 비밀번호 변경 부분 눌렀는지 여부 확인 후 보임*/}\r\n    {showPwd ? <div>\r\n    <InputComponent \r\n        value={pw}\r\n        onChange={setPw}\r\n        name=\"newPassword\"\r\n        label=\"새로운 비밀번호\" \r\n        placeholder=\"영문, 숫자 포함 6-12자리\"\r\n        type=\"password\"\r\n       />\r\n    <Label>비밀번호 확인</Label>\r\n    <InputComponent  \r\n        value={pwChk}\r\n        onChange={onChangeChkPw}\r\n        name=\"passwordChk\" \r\n        label=\"비밀번호 확인\" \r\n        type=\"password\"/>\r\n    {pwError&&<div style={{color : '#F79F81', fontSize: '10px'}}>비밀번호가 일치하지 않습니다.</div>}\r\n    </div> : null} {/* 비밀번호 변경  닫기*/}\r\n    </div> : null}  {/* 카카오 로그인 확인 닫기 */}\r\n    <Label>닉네임</Label>\r\n    <InputComponent   \r\n        onChange={setNickname}\r\n        value={nickname}\r\n        name=\"nickname\" \r\n        label=\"닉네임\" />\r\n    <Btn onClick={onClickChk}  value=\"nickname\">중복확인</Btn>\r\n    <Label>주소</Label>\r\n         <InputComponent   \r\n        onChange={setShowAddress}\r\n        value={showAddress}\r\n        name=\"showAddress\" \r\n        label=\"주소\" \r\n        readOnly\r\n        />\r\n        <Btn onClick={modal}>주소찾기</Btn>\r\n    {/* <div> */}\r\n     <Modal isOpen={isModal} style={{width:'150px'}}>\r\n        <Postcode\r\n         style={{ width: 320, height: 320 }}\r\n          jsOptions={{ animated: true, hemaileMapBtn: true }}\r\n          onSelected={data => {\r\n            setShowAddress(data.bname);\r\n            setFullAddress(data.address);\r\n            setModal(false);\r\n          }}\r\n        />\r\n        <CloseBtn onClick={modal}>X</CloseBtn>\r\n      </Modal>\r\n      {/* </div> */}\r\n    <div>\r\n    <SubmitButton \r\n        onClick={onSubmitForm}>\r\n           수정\r\n    </SubmitButton>\r\n    </div>\r\n    </form>\r\n    </Page>\r\n    </>\r\n    );\r\n}\r\nexport default MyInfoEdit;"]},"metadata":{},"sourceType":"module"}